CREATE SCHEMA PUBLIC AUTHORIZATION DBA
CREATE MEMORY TABLE CATEGORY(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,CREATEDAT TIMESTAMP,DESCRIPTION VARCHAR(255),POS INTEGER,STATUS VARCHAR(255),TITLE VARCHAR(255),AUTHOR_ID BIGINT,PARENT_ID BIGINT,CONSTRAINT FK6DD211E19E470F2 FOREIGN KEY(PARENT_ID) REFERENCES CATEGORY(ID))
CREATE MEMORY TABLE POST(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,CONTENT LONGVARCHAR,CREATEDAT TIMESTAMP,HEADER LONGVARCHAR,STATUS VARCHAR(255),TITLE VARCHAR(255),AUTHOR_ID BIGINT,CATEGORY_ID BIGINT,CONSTRAINT FK260CC0FA266C1E FOREIGN KEY(CATEGORY_ID) REFERENCES CATEGORY(ID))
CREATE MEMORY TABLE POST_TAG(POST_ID BIGINT NOT NULL,TAGS_ID BIGINT NOT NULL,PRIMARY KEY(POST_ID,TAGS_ID),CONSTRAINT FK30FE237B388562DE FOREIGN KEY(POST_ID) REFERENCES POST(ID))
CREATE MEMORY TABLE TAG(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,NAME VARCHAR(255))
CREATE MEMORY TABLE USER(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,EMAIL VARCHAR(255),FIRSTNAME VARCHAR(255),IMAGE VARCHAR(255),LASTNAME VARCHAR(255),PASSWORD VARCHAR(255),ROLE VARCHAR(255),STATUS VARCHAR(255),USERNAME VARCHAR(255),WEBBLOG VARCHAR(255))
CREATE MEMORY TABLE USER_POST(USER_ID BIGINT NOT NULL,POSTS_ID BIGINT NOT NULL,CONSTRAINT SYS_CT_56 UNIQUE(POSTS_ID),CONSTRAINT FK8B9EA0947D03CECB FOREIGN KEY(POSTS_ID) REFERENCES POST(ID),CONSTRAINT FK8B9EA09447140EFE FOREIGN KEY(USER_ID) REFERENCES USER(ID))
ALTER TABLE CATEGORY ADD CONSTRAINT FK6DD211EA7CD013E FOREIGN KEY(AUTHOR_ID) REFERENCES USER(ID)
ALTER TABLE POST ADD CONSTRAINT FK260CC0A7CD013E FOREIGN KEY(AUTHOR_ID) REFERENCES USER(ID)
ALTER TABLE POST_TAG ADD CONSTRAINT FK30FE237B222C70F7 FOREIGN KEY(TAGS_ID) REFERENCES TAG(ID)
ALTER TABLE CATEGORY ALTER COLUMN ID RESTART WITH 5
ALTER TABLE POST ALTER COLUMN ID RESTART WITH 3
ALTER TABLE TAG ALTER COLUMN ID RESTART WITH 6
ALTER TABLE USER ALTER COLUMN ID RESTART WITH 3
CREATE USER SA PASSWORD ""
GRANT DBA TO SA
SET WRITE_DELAY 10
SET SCHEMA PUBLIC
INSERT INTO CATEGORY VALUES(1,'2010-10-05 11:49:00.000000000','all the last news from the blog world.',0,'a','root',1,NULL)
INSERT INTO CATEGORY VALUES(2,'2010-10-05 11:49:00.000000000','all the last news from the blog world.',1,'a','News',1,1)
INSERT INTO CATEGORY VALUES(3,'2010-10-05 11:49:00.000000000','all the last news from the blog world.',2,'a','Games',1,1)
INSERT INTO CATEGORY VALUES(4,'2010-10-05 11:49:00.000000000','all the last news from the blog world.',3,'a','Web',1,1)
INSERT INTO POST VALUES(1,'the default content for the first Post','2010-10-10 14:00:00.000000000','the header for the first post','p','My First Post',1,2)
INSERT INTO POST VALUES(2,'the default content for the second from moderator Post','2010-10-10 14:00:00.000000000','this second post about web design','p','The second post from Moderator',2,4)
INSERT INTO POST_TAG VALUES(1,2)
INSERT INTO POST_TAG VALUES(1,3)
INSERT INTO POST_TAG VALUES(1,4)
INSERT INTO POST_TAG VALUES(2,2)
INSERT INTO POST_TAG VALUES(2,3)
INSERT INTO POST_TAG VALUES(2,5)
INSERT INTO TAG VALUES(1,'News')
INSERT INTO TAG VALUES(2,'Web')
INSERT INTO TAG VALUES(3,'Blog')
INSERT INTO TAG VALUES(4,'Post')
INSERT INTO TAG VALUES(5,'Design')
INSERT INTO USER VALUES(1,'frederic.delorme@web-context.com','Administrator','test','Blog manager','admin','ADMINISTRATOR','a','admin',NULL)
INSERT INTO USER VALUES(2,'admin@web-context.com','Moderator','test','Blog publisher','moderator','MODERATOR','a','moderator',NULL)
